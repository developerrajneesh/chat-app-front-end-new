"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[436],{4430:(e,t,i)=>{i.d(t,{i:()=>o});var s=i(1120),n=i(9867),r=i(9409),a=i(711),l=i(5788);class o extends n.J{constructor(){super(...arguments),Object.defineProperty(this,"_flipped",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){this._textKeys.push("textType","kerning"),super._afterNew()}_makeText(){this._text=this.children.push(r.R.new(this._root,{}))}baseRadius(){const e=this.getPrivate("radius",0),t=this.getPrivate("innerRadius",0),i=this.get("baseRadius",0);return t+l.JY(i,e-t)}radius(){const e=this.get("inside",!1);return this.baseRadius()+this.get("radius",0)*(e?-1:1)}_updateChildren(){if(super._updateChildren(),this.isDirty("baseRadius")||this.isPrivateDirty("radius")||this.isPrivateDirty("innerRadius")||this.isDirty("labelAngle")||this.isDirty("radius")||this.isDirty("inside")||this.isDirty("orientation")||this.isDirty("textType")){const e=this.get("textType","adjusted"),t=this.get("inside",!1),i=this.get("orientation");let n=a.n0(this.get("labelAngle",0));this._text.set("startAngle",this.get("labelAngle",0)),this._text.set("inside",t);const r=a.F8(n),l=a.gn(n);let o=this.baseRadius(),u=this.radius();if(this._display.angle=0,"circular"==e)this.setAll({paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}),this._text.set("orientation",i),this._text.set("radius",u);else{0==o&&(n=0,u=0);let t=u*l,a=u*r;"radial"==e?(this.setRaw("x",t),this.setRaw("y",a),n<90||n>270||"auto"!=i?(this._display.angle=n,this._flipped=!1):(this._display.angle=n+180,this._flipped=!0),this._dirty.rotation=!1):"adjusted"==e?(this.setRaw("centerX",s.yP),this.setRaw("centerY",s.yP),this.setRaw("x",t),this.setRaw("y",a)):"regular"==e&&(this.setRaw("x",t),this.setRaw("y",a))}this.markDirtyPosition(),this.markDirtyBounds()}}_updatePosition(){const e=this.get("textType","regular"),t=this.get("inside",!1);let i=0,n=0,r=this.get("labelAngle",0),l=this.localBounds(),o=l.right-l.left,u=l.bottom-l.top;if("radial"==e){if(this._flipped){let e=this.get("centerX");e instanceof s.QE&&(o*=1-2*e.value),i=o*a.gn(r),n=o*a.F8(r)}}else t||"adjusted"!=e||(i=o/2*a.gn(r),n=u/2*a.F8(r));this.setRaw("dx",i),this.setRaw("dy",n),super._updatePosition()}get text(){return this._text}}Object.defineProperty(o,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RadialLabel"}),Object.defineProperty(o,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:n.J.classNames.concat([o.className])})},9409:(e,t,i)=>{i.d(t,{R:()=>r});var s=i(9638),n=i(711);class r extends s.E{constructor(){super(...arguments),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeRadialText("",this.textStyle)})}_afterNew(){super._afterNew()}_beforeChanged(){super._beforeChanged(),this._display.clear(),this.isDirty("textType")&&(this._display.textType=this.get("textType"),this.markDirtyBounds()),this.isDirty("radius")&&(this._display.radius=this.get("radius"),this.markDirtyBounds()),this.isDirty("startAngle")&&(this._display.startAngle=(this.get("startAngle",0)+90)*n.nr,this.markDirtyBounds()),this.isDirty("inside")&&(this._display.inside=this.get("inside"),this.markDirtyBounds()),this.isDirty("orientation")&&(this._display.orientation=this.get("orientation"),this.markDirtyBounds()),this.isDirty("kerning")&&(this._display.kerning=this.get("kerning"),this.markDirtyBounds())}}Object.defineProperty(r,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RadialText"}),Object.defineProperty(r,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:s.E.classNames.concat([r.className])})},6299:(e,t,i)=>{i.d(t,{J:()=>o});var s=i(6648),n=i(5077),r=i(1120),a=i(9927),l=i(711);class o extends s.A{constructor(){super(...arguments),Object.defineProperty(this,"ix",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"iy",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_generator",{enumerable:!0,configurable:!0,writable:!0,value:(0,a.A)()})}_getTooltipPoint(){let e=this.get("tooltipX"),t=this.get("tooltipY"),i=0,s=0;n.Et(e)&&(i=e),n.Et(t)&&(s=t);let a=this.get("radius",0),l=this.get("innerRadius",0);return a+=this.get("dRadius",0),l+=this.get("dInnerRadius",0),l<0&&(l=a+l),e instanceof r.QE&&(i=this.ix*(l+(a-l)*e.value)),t instanceof r.QE&&(s=this.iy*(l+(a-l)*t.value)),this.get("arc")>=360&&0==l&&(i=0,s=0),{x:i,y:s}}_beforeChanged(){super._beforeChanged(),(this.isDirty("radius")||this.isDirty("arc")||this.isDirty("innerRadius")||this.isDirty("startAngle")||this.isDirty("dRadius")||this.isDirty("dInnerRadius")||this.isDirty("cornerRadius")||this.isDirty("shiftRadius"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){let e=this.get("startAngle",0),t=this.get("arc",0);const i=this._generator;t<0&&(e+=t,t*=-1),t>.1&&i.cornerRadius(this.get("cornerRadius",0)),i.context(this._display);let s=this.get("radius",0),n=this.get("innerRadius",0);s+=this.get("dRadius",0),n+=this.get("dInnerRadius",0),n<0&&(n=s+n),i({innerRadius:n,outerRadius:s,startAngle:(e+90)*l.nr,endAngle:(e+t+90)*l.nr});let r=e+t/2;this.ix=l.gn(r),this.iy=l.F8(r);const a=this.get("shiftRadius",0);this.setRaw("dx",this.ix*a),this.setRaw("dy",this.iy*a),this.markDirtyPosition()}}}Object.defineProperty(o,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Slice"}),Object.defineProperty(o,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:s.A.classNames.concat([o.className])})},2068:(e,t,i)=>{i.d(t,{ArcDiagram:()=>ae,ArcDiagramLink:()=>re,ArcDiagramNodes:()=>ne,Chord:()=>Q,ChordDirected:()=>z,ChordLink:()=>X,ChordLinkDirected:()=>Z,ChordNodes:()=>J,ChordNonRibbon:()=>V,Flow:()=>s.n,FlowLink:()=>H.Z,FlowNode:()=>U.F,FlowNodes:()=>F.c,Sankey:()=>$.O,SankeyLink:()=>ee.s,SankeyNodes:()=>te.R});var s=i(3690),n=Math.abs,r=Math.cos,a=Math.sin,l=Math.PI,o=l/2,u=2*l,c=Math.max,h=1e-12;function d(e,t){return Array.from({length:t-e},((t,i)=>e+i))}function g(e,t){var i=0,s=null,n=null,r=null;function a(a){var l,o=a.length,h=new Array(o),g=d(0,o),p=new Array(o*o),f=new Array(o),y=0;a=Float64Array.from({length:o*o},t?(e,t)=>a[t%o][t/o|0]:(e,t)=>a[t/o|0][t%o]);for(let t=0;t<o;++t){let i=0;for(let s=0;s<o;++s)i+=a[t*o+s]+e*a[s*o+t];y+=h[t]=i}l=(y=c(0,u-i*o)/y)?i:u/o;{let t=0;s&&g.sort(((e,t)=>s(h[e],h[t])));for(const i of g){const s=t;if(e){const e=d(1+~o,o).filter((e=>e<0?a[~e*o+i]:a[i*o+e]));n&&e.sort(((e,t)=>n(e<0?-a[~e*o+i]:a[i*o+e],t<0?-a[~t*o+i]:a[i*o+t])));for(const s of e)if(s<0){(p[~s*o+i]||(p[~s*o+i]={source:null,target:null})).target={index:i,startAngle:t,endAngle:t+=a[~s*o+i]*y,value:a[~s*o+i]}}else{(p[i*o+s]||(p[i*o+s]={source:null,target:null})).source={index:i,startAngle:t,endAngle:t+=a[i*o+s]*y,value:a[i*o+s]}}f[i]={index:i,startAngle:s,endAngle:t,value:h[i]}}else{const e=d(0,o).filter((e=>a[i*o+e]||a[e*o+i]));n&&e.sort(((e,t)=>n(a[i*o+e],a[i*o+t])));for(const s of e){let e;if(i<s?(e=p[i*o+s]||(p[i*o+s]={source:null,target:null}),e.source={index:i,startAngle:t,endAngle:t+=a[i*o+s]*y,value:a[i*o+s]}):(e=p[s*o+i]||(p[s*o+i]={source:null,target:null}),e.target={index:i,startAngle:t,endAngle:t+=a[i*o+s]*y,value:a[i*o+s]},i===s&&(e.source=e.target)),e.source&&e.target&&e.source.value<e.target.value){const t=e.source;e.source=e.target,e.target=t}}f[i]={index:i,startAngle:s,endAngle:t,value:h[i]}}t+=l}}return(p=Object.values(p)).groups=f,r?p.sort(r):p}return a.padAngle=function(e){return arguments.length?(i=c(0,e),a):i},a.sortGroups=function(e){return arguments.length?(s=e,a):s},a.sortSubgroups=function(e){return arguments.length?(n=e,a):n},a.sortChords=function(e){return arguments.length?(null==e?r=null:(t=e,r=function(e,i){return t(e.source.value+e.target.value,i.source.value+i.target.value)})._=e,a):r&&r._;var t},a}var p=i(3718),f=Array.prototype.slice;function y(e){return function(){return e}}function b(e){return e.source}function m(e){return e.target}function _(e){return e.radius}function v(e){return e.startAngle}function x(e){return e.endAngle}function w(){return 0}function k(){return 10}function A(e){var t=b,i=m,s=_,l=_,u=v,c=x,d=w,g=null;function k(){var y,b=t.apply(this,arguments),m=i.apply(this,arguments),_=d.apply(this,arguments)/2,v=f.call(arguments),x=+s.apply(this,(v[0]=b,v)),w=u.apply(this,v)-o,k=c.apply(this,v)-o,A=+l.apply(this,(v[0]=m,v)),P=u.apply(this,v)-o,N=c.apply(this,v)-o;if(g||(g=y=(0,p.Ae)()),_>h&&(n(k-w)>2*_+h?k>w?(w+=_,k-=_):(w-=_,k+=_):w=k=(w+k)/2,n(N-P)>2*_+h?N>P?(P+=_,N-=_):(P-=_,N+=_):P=N=(P+N)/2),g.moveTo(x*r(w),x*a(w)),g.arc(0,0,x,w,k),w!==P||k!==N)if(e){var D=A-+e.apply(this,arguments),R=(P+N)/2;g.quadraticCurveTo(0,0,D*r(P),D*a(P)),g.lineTo(A*r(R),A*a(R)),g.lineTo(D*r(N),D*a(N))}else g.quadraticCurveTo(0,0,A*r(P),A*a(P)),g.arc(0,0,A,P,N);if(g.quadraticCurveTo(0,0,x*r(w),x*a(w)),g.closePath(),y)return g=null,y+""||null}return e&&(k.headRadius=function(t){return arguments.length?(e="function"===typeof t?t:y(+t),k):e}),k.radius=function(e){return arguments.length?(s=l="function"===typeof e?e:y(+e),k):s},k.sourceRadius=function(e){return arguments.length?(s="function"===typeof e?e:y(+e),k):s},k.targetRadius=function(e){return arguments.length?(l="function"===typeof e?e:y(+e),k):l},k.startAngle=function(e){return arguments.length?(u="function"===typeof e?e:y(+e),k):u},k.endAngle=function(e){return arguments.length?(c="function"===typeof e?e:y(+e),k):c},k.padAngle=function(e){return arguments.length?(d="function"===typeof e?e:y(+e),k):d},k.source=function(e){return arguments.length?(t=e,k):t},k.target=function(e){return arguments.length?(i=e,k):i},k.context=function(e){return arguments.length?(g=null==e?null:e,k):g},k}function P(){return A()}function N(){return A(k)}function D(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function R(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}i(4291);const{abs:j,max:T,min:O}=Math;function C(e){return[+e[0],+e[1]]}function I(e){return[C(e[0]),C(e[1])]}["w","e"].map(M),["n","s"].map(M),["n","w","e","s","nw","ne","sw","se"].map(M);function M(e){return{type:e}}function L(e,t,i){this.k=e,this.x=t,this.y=i}L.prototype={constructor:L,scale:function(e){return 1===e?this:new L(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new L(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new L(1,0,0);L.prototype;var B=i(4923),S=i(6873),F=i(3962),E=i(6299),W=i(4430),Y=i(711);class J extends F.c{constructor(){super(...arguments),Object.defineProperty(this,"labels",{enumerable:!0,configurable:!0,writable:!0,value:new S.TS(B.Bj.new({}),(()=>W.i._new(this._root,{},[this.labels.template])))}),Object.defineProperty(this,"flow",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dAngle",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"slices",{enumerable:!0,configurable:!0,writable:!0,value:new S.TS(B.Bj.new({}),(()=>E.J._new(this._root,{themeTags:["shape"]},[this.slices.template])))}),Object.defineProperty(this,"rectangles",{enumerable:!0,configurable:!0,writable:!0,value:this.slices})}makeNode(e){const t=super.makeNode(e,"chord"),i=t.children.insertIndex(0,this.slices.make());e.set("slice",i),i._setSoft("fill",e.get("fill"));const s=this.labels.make();return this.labels.push(s),s.addTag("flow"),s.addTag("chord"),s.addTag("node"),t.children.push(s),e.set("label",s),t.events.on("dragstart",(e=>{let t=this.toLocal(e.point);const i=Y._H({x:0,y:0},t);this.flow&&(this._dAngle=this.flow.get("startAngle",0)-i)})),t.events.on("dragged",(e=>{let i=this.toLocal(e.point);const s=Y._H({x:0,y:0},i);t.setAll({x:0,y:0}),this.flow&&this.flow.set("startAngle",s+this._dAngle)})),s._setDataItem(e),i._setDataItem(e),t}_positionBullet(e){const t=e.get("sprite");if(t){const i=t.dataItem;if(i){const t=e.get("sprite");if(t){const s=i.get("slice"),n=e.get("locationX",.5),r=e.get("locationY",.5);if(s){const e=s.get("radius",0),i=s.get("innerRadius",0),a=i+(e-i)*r,l=s.get("startAngle",0)+s.get("arc",0)*n;t.setAll({x:a*Y.gn(l),y:a*Y.F8(l)})}}}}}_updateNodeColor(e){const t=e.get("slice");t&&t.set("fill",e.get("fill"))}disposeDataItem(e){super.disposeDataItem(e);let t=e.get("slice");t&&(this.slices.removeValue(t),t.dispose())}}Object.defineProperty(J,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ChordNodes"}),Object.defineProperty(J,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:F.c.classNames.concat([J.className])});var H=i(6107);class X extends H.Z{constructor(){super(...arguments),Object.defineProperty(this,"_p0",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_p1",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}getPoint(e){if(this._p0&&this._p1){if("line"===this._type){let t=Y.Md(this._p0,this._p1,e);return{x:t.x,y:t.y,angle:Y._H(this._p0,this._p1)}}{let t=Y.DW(this._p0,this._p1,{x:0,y:0},Math.max(0,e-.01)),i=Y.DW(this._p0,this._p1,{x:0,y:0},Math.min(1,e+.01)),s=Y.DW(this._p0,this._p1,{x:0,y:0},e);return{x:s.x,y:s.y,angle:Y._H(t,i)}}}return{x:0,y:0,angle:0}}}Object.defineProperty(X,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ChordLink"}),Object.defineProperty(X,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:H.Z.classNames.concat([X.className])});var q=i(1120),G=i(7552),K=i(5788);class Q extends s.n{constructor(){super(...arguments),Object.defineProperty(this,"links",{enumerable:!0,configurable:!0,writable:!0,value:new S.TS(B.Bj.new({}),(()=>X._new(this._root,{themeTags:["link","shape"]},[this.links.template])))}),Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(J.new(this._root,{}))}),Object.defineProperty(this,"_d3chord",{enumerable:!0,configurable:!0,writable:!0,value:g(!1,!1)}),Object.defineProperty(this,"_chordLayout",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_ribbon",{enumerable:!0,configurable:!0,writable:!0,value:P()})}_afterNew(){this._settings.themeTags=K.kE(this._settings.themeTags,["chord"]),this.linksContainer.setAll({x:q.yP,y:q.yP}),this.bulletsContainer.setAll({x:q.yP,y:q.yP}),super._afterNew()}_fixRibbon(e){e.startAngle((e=>e.startAngle+this.get("startAngle",0)*Y.nr+Math.PI/2)),e.endAngle((e=>e.endAngle+this.get("startAngle",0)*Y.nr+Math.PI/2))}makeLink(e){const t=this.linksContainer.children.push(this.links.make());return this.links.push(t),t._setDataItem(e),t.set("source",e.get("source")),t.set("target",e.get("target")),t.series=this,t}_makeMatrix(){const e=[];return G.__(this.nodes.dataItems,(t=>{const i=[];e.push(i);let s=t.get("outgoingLinks");G.__(this.nodes.dataItems,(e=>{let t=0;s&&G.__(s,(i=>{i.get("target")===e&&(t=i.get("valueWorking"));let s=this.getPrivate("valueSum",0),n=this.get("minSize",0);t>0&&n>0&&t<s*n&&(t=s*n)})),i.push(t)}))})),e}_prepareChildren(){super._prepareChildren(),this._fixRibbon(this._ribbon);let e=!1;if(this._valuesDirty||this._sizeDirty||this.isDirty("padAngle")||this.isDirty("startAngle")){const t=this._makeMatrix();this._d3chord.padAngle(this.get("padAngle",0)*Y.nr);const i=this.get("sort");"ascending"===i?this._d3chord.sortGroups(D):"descending"===i&&this._d3chord.sortGroups(R),this._chordLayout=this._d3chord(t),e=!0}if(e||this.isDirty("radius")||this.isDirty("nodeWidth")){let e=K.JY(this.get("radius",0),Math.min(this.innerWidth(),this.innerHeight()))/2,t=0;const i=this.get("startAngle",0),s=this.get("nodeWidth",0);G.__(this.nodes.dataItems,(n=>{const r=n.get("slice"),a=this._chordLayout.groups[t],l=a.startAngle*Y.iR+i,o=a.endAngle*Y.iR+i;r.setAll({radius:e,innerRadius:e-s,startAngle:l,arc:o-l});const u=n.get("label");u.setAll({labelAngle:l+(o-l)/2}),u.setPrivate("radius",e),u.setPrivate("innerRadius",.1),t++}));const n=e-this.get("nodeWidth",0);G.__(this._chordLayout,(e=>{let t=this._linksByIndex[e.source.index+"_"+e.target.index];if(t||(t=this._linksByIndex[e.target.index+"_"+e.source.index]),t){const i=t.get("link");this._getLinkPoints(i,n,e),this._updateLink(this._ribbon,i,n,e)}}))}}_getLinkPoints(e,t,i){const s=i.source,n=i.target,r=this.get("startAngle",0)*Y.nr;if(s&&n){const i=s.startAngle,a=i+(s.endAngle-i)/2+r,l=n.startAngle,o=l+(n.endAngle-l)/2+r;e._p0={x:t*Math.cos(a),y:t*Math.sin(a)},e._p1={x:t*Math.cos(o),y:t*Math.sin(o)}}}_updateLink(e,t,i,s){s&&(e.sourceRadius(K.JY(t.get("sourceRadius",q.Q2),i)),e.targetRadius(K.JY(t.get("targetRadius",q.Q2),i)),t.set("draw",(t=>{e.context(t),e(s)})))}}Object.defineProperty(Q,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Chord"}),Object.defineProperty(Q,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:s.n.classNames.concat([Q.className])});class Z extends X{_afterNew(){this._settings.themeTags=K.kE(this._settings.themeTags,["chord","link","directed"]),super._afterNew()}}Object.defineProperty(Z,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ChordLinkDirected"}),Object.defineProperty(Z,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:X.classNames.concat([Z.className])});class z extends Q{constructor(){super(...arguments),Object.defineProperty(this,"_d3chord",{enumerable:!0,configurable:!0,writable:!0,value:g(!0,!1)}),Object.defineProperty(this,"_ribbonArrow",{enumerable:!0,configurable:!0,writable:!0,value:N()}),Object.defineProperty(this,"links",{enumerable:!0,configurable:!0,writable:!0,value:new S.TS(B.Bj.new({}),(()=>Z._new(this._root,{themeTags:["link","shape"]},[this.links.template])))})}makeLink(e){const t=this.linksContainer.children.push(this.links.make());return t._setDataItem(e),t.set("source",e.get("source")),t.set("target",e.get("target")),t.series=this,t}_afterNew(){this._settings.themeTags=K.kE(this._settings.themeTags,["directed"]),super._afterNew(),this._markDirtyKey("linkHeadRadius")}_prepareChildren(){const e="linkHeadRadius";if(this.isDirty(e)){const t=this.get(e);if(null==t)this._ribbon=P();else{let e=N();e.headRadius(t),this._ribbon=e}}super._prepareChildren()}}Object.defineProperty(z,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ChordDirected"}),Object.defineProperty(z,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Q.classNames.concat([z.className])});class V extends Q{_afterNew(){this._settings.themeTags=K.kE(this._settings.themeTags,["chord","basic"]),super._afterNew()}_makeMatrix(){const e=[];return G.__(this.nodes.dataItems,(t=>{const i=[];e.push(i),G.__(this.nodes.dataItems,(e=>{let s=1;t===e&&(s=0),i.push(s)}))})),e}_updateLink(e,t,i,s){if(t._type=this.get("linkType"),s){const e=this.get("linkType");t.set("draw",(i=>{let s=t._p0,n=t._p1;s&&n&&(i.moveTo(s.x,s.y),"line"==e?i.lineTo(n.x,n.y):i.quadraticCurveTo(0,0,n.x,n.y))}))}}_getLinkPoints(e,t,i){const s=e.get("source"),n=e.get("target");if(s&&n){const i=s.get("slice"),r=n.get("slice"),a=i.get("startAngle",0)+i.get("arc",0)/2,l=r.get("startAngle",0)+r.get("arc",0)/2;e._p0={x:t*Y.gn(a),y:t*Y.F8(a)},e._p1={x:t*Y.gn(l),y:t*Y.F8(l)}}}}Object.defineProperty(V,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ChordNonRibbon"}),Object.defineProperty(V,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Q.classNames.concat([V.className])});var U=i(3711),$=i(9763),ee=i(9698),te=i(3077),ie=i(9025),se=i(9867);class ne extends F.c{constructor(){super(...arguments),Object.defineProperty(this,"labels",{enumerable:!0,configurable:!0,writable:!0,value:new S.TS(B.Bj.new({}),(()=>se.J._new(this._root,{},[this.labels.template])))}),Object.defineProperty(this,"flow",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dAngle",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"circles",{enumerable:!0,configurable:!0,writable:!0,value:new S.TS(B.Bj.new({}),(()=>ie.j._new(this._root,{themeTags:["shape"]},[this.circles.template])))})}makeNode(e){const t=super.makeNode(e,"ArcDiagram"),i=t.children.insertIndex(0,this.circles.make());e.set("circle",i),i._setSoft("fill",e.get("fill"));const s=this.labels.make();return this.labels.push(s),s.addTag("flow"),s.addTag("arcdiagram"),s.addTag("node"),t.children.push(s),e.set("label",s),s._setDataItem(e),i._setDataItem(e),t}disposeDataItem(e){super.disposeDataItem(e);let t=e.get("circle");t&&(this.circles.removeValue(t),t.dispose())}_updateNodeColor(e){const t=e.get("circle");t&&t.set("fill",e.get("fill"))}}Object.defineProperty(ne,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ArcDiagramNodes"}),Object.defineProperty(ne,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:F.c.classNames.concat([ne.className])});class re extends H.Z{constructor(){super(...arguments),Object.defineProperty(this,"_p0",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_p1",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_radius",{enumerable:!0,configurable:!0,writable:!0,value:0})}_beforeChanged(){if(super._beforeChanged(),this.isDirty("source")){const e=this.get("source");if(e){const t=e.get("node");this._disposers.push(t.events.on("positionchanged",(()=>{this._markDirtyKey("stroke")})))}}if(this.isDirty("target")){const e=this.get("target");if(e){const t=e.get("node");this._disposers.push(t.events.on("positionchanged",(()=>{this._markDirtyKey("stroke")})))}}if(this.isPrivateDirty("orientation")){const e=this.series,t=this.dataItem;t&&e&&e._updateLinkColor(t)}this.series&&this.dataItem&&this.series._positionBullets(this.dataItem),"gradient"==this.get("strokeStyle")?this.set("isMeasured",!0):this.set("isMeasured",!1)}_changed(){super._changed(),this._clear&&this._draw()}_draw(){const e=this.get("target"),t=this.get("source");if(t&&e){let i=t.get("node"),s=e.get("node");const n=i.x(),r=i.y(),a=s.x(),l=s.y();this._p0={x:n,y:r},this._p1={x:a,y:l};let o=0;if("vertical"==this.getPrivate("orientation")){o=(l-r)/2;let e=1;r>l&&(e=-1),this._display.arc(n,r+o,o*e,-Math.PI/2,Math.PI/2)}else{o=(a-n)/2;let e=1;n>a&&(e=-1),this._display.arc(n+o,r,o*e,-Math.PI,0)}this._radius=o}}getPoint(e){if(this._p0&&this._p1){const t=this._radius;if("vertical"==this.getPrivate("orientation")){let i=180*e-90;return{y:this._p0.y+t+t*Y.F8(i),x:t*Y.gn(i),angle:i+90}}{let i=180+180*e;return{x:this._p0.x+t+t*Y.gn(i),y:t*Y.F8(i),angle:i+90}}}return{x:0,y:0,angle:0}}}Object.defineProperty(re,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ArcDiagramLink"}),Object.defineProperty(re,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:H.Z.classNames.concat([re.className])});class ae extends s.n{constructor(){super(...arguments),Object.defineProperty(this,"links",{enumerable:!0,configurable:!0,writable:!0,value:new S.TS(B.Bj.new({}),(()=>re._new(this._root,{themeTags:["link","shape"]},[this.links.template])))}),Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(ne.new(this._root,{}))})}_afterNew(){this._settings.themeTags=K.kE(this._settings.themeTags,["arcdiagram",this._settings.orientation||"horizontal"]),super._afterNew(),this.nodes.children.push(this.bulletsContainer)}makeLink(e){const t=this.nodes.children.moveValue(this.links.make(),0);return this.links.push(t),t._setDataItem(e),t.set("source",e.get("source")),t.set("target",e.get("target")),t.series=this,t}_prepareChildren(){if(super._prepareChildren(),this._valuesDirty||this._sizeDirty||this.isDirty("orientation")){let e=1;const t=this.get("orientation");G.__(this.dataItems,(e=>{e.get("link").setPrivate("orientation",this.get("orientation"))})),e="vertical"==t?this.innerHeight():this.innerWidth();let i=0,s=1/0,n=this.get("radiusKey");"none"!=n&&G.__(this.nodes.dataItems,(e=>{let t=e.get(n+"Working");i+=t,s=Math.min(s,t)}));const r=this.nodes.dataItems.length,a=this.get("nodePadding",10),l=this.get("minRadius",5);e-=r*(a+2*l),e<=0&&(e=0);let o=e/(i-r*s),u=0;const c=this.get("animationDuration",0),h=this.get("animationEasing");G.__(this.nodes.dataItems,(i=>{let d=i.get(n+"Working");const g=i.get("node");let p=l+o*(d-s)/2;if("none"==n&&(p=l+e/r/2),"vertical"==t){g.set("x",0);const e=u+a+p;0==g.y()?g.set("y",e):g.animate({key:"y",to:e,duration:c,easing:h})}else{g.set("y",0);const e=u+a+p;0==g.x()?g.set("x",e):g.animate({key:"x",to:e,duration:c,easing:h})}u=u+a+2*p,i.get("circle").set("radius",p)}))}}_updateLinkColor(e){super._updateLinkColor(e);const t=this.get("orientation"),i=e.get("link")._fillGradient,s=e.get("link")._strokeGradient;"vertical"==t?(i&&i.set("rotation",90),s&&s.set("rotation",90)):(i&&i.set("rotation",0),s&&s.set("rotation",0))}}Object.defineProperty(ae,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ArcDiagram"}),Object.defineProperty(ae,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:s.n.classNames.concat([ae.className])})},9927:(e,t,i)=>{i.d(t,{A:()=>k});var s=i(3809);const n=Math.abs,r=Math.atan2,a=Math.cos,l=Math.max,o=Math.min,u=Math.sin,c=Math.sqrt,h=1e-12,d=Math.PI,g=d/2,p=2*d;function f(e){return e>=1?g:e<=-1?-g:Math.asin(e)}var y=i(1286);function b(e){return e.innerRadius}function m(e){return e.outerRadius}function _(e){return e.startAngle}function v(e){return e.endAngle}function x(e){return e&&e.padAngle}function w(e,t,i,s,n,r,a){var o=e-i,u=t-s,h=(a?r:-r)/c(o*o+u*u),d=h*u,g=-h*o,p=e+d,f=t+g,y=i+d,b=s+g,m=(p+y)/2,_=(f+b)/2,v=y-p,x=b-f,w=v*v+x*x,k=n-r,A=p*b-y*f,P=(x<0?-1:1)*c(l(0,k*k*w-A*A)),N=(A*x-v*P)/w,D=(-A*v-x*P)/w,R=(A*x+v*P)/w,j=(-A*v+x*P)/w,T=N-m,O=D-_,C=R-m,I=j-_;return T*T+O*O>C*C+I*I&&(N=R,D=j),{cx:N,cy:D,x01:-d,y01:-g,x11:N*(n/k-1),y11:D*(n/k-1)}}function k(){var e=b,t=m,i=(0,s.A)(0),l=null,k=_,A=v,P=x,N=null,D=(0,y.i)(R);function R(){var s,y,b,m=+e.apply(this,arguments),_=+t.apply(this,arguments),v=k.apply(this,arguments)-g,x=A.apply(this,arguments)-g,R=n(x-v),j=x>v;if(N||(N=s=D()),_<m&&(y=_,_=m,m=y),_>h)if(R>p-h)N.moveTo(_*a(v),_*u(v)),N.arc(0,0,_,v,x,!j),m>h&&(N.moveTo(m*a(x),m*u(x)),N.arc(0,0,m,x,v,j));else{var T,O,C=v,I=x,M=v,L=x,B=R,S=R,F=P.apply(this,arguments)/2,E=F>h&&(l?+l.apply(this,arguments):c(m*m+_*_)),W=o(n(_-m)/2,+i.apply(this,arguments)),Y=W,J=W;if(E>h){var H=f(E/m*u(F)),X=f(E/_*u(F));(B-=2*H)>h?(M+=H*=j?1:-1,L-=H):(B=0,M=L=(v+x)/2),(S-=2*X)>h?(C+=X*=j?1:-1,I-=X):(S=0,C=I=(v+x)/2)}var q=_*a(C),G=_*u(C),K=m*a(L),Q=m*u(L);if(W>h){var Z,z=_*a(I),V=_*u(I),U=m*a(M),$=m*u(M);if(R<d)if(Z=function(e,t,i,s,n,r,a,l){var o=i-e,u=s-t,c=a-n,d=l-r,g=d*o-c*u;if(!(g*g<h))return[e+(g=(c*(t-r)-d*(e-n))/g)*o,t+g*u]}(q,G,U,$,z,V,K,Q)){var ee=q-Z[0],te=G-Z[1],ie=z-Z[0],se=V-Z[1],ne=1/u(((b=(ee*ie+te*se)/(c(ee*ee+te*te)*c(ie*ie+se*se)))>1?0:b<-1?d:Math.acos(b))/2),re=c(Z[0]*Z[0]+Z[1]*Z[1]);Y=o(W,(m-re)/(ne-1)),J=o(W,(_-re)/(ne+1))}else Y=J=0}S>h?J>h?(T=w(U,$,q,G,_,J,j),O=w(z,V,K,Q,_,J,j),N.moveTo(T.cx+T.x01,T.cy+T.y01),J<W?N.arc(T.cx,T.cy,J,r(T.y01,T.x01),r(O.y01,O.x01),!j):(N.arc(T.cx,T.cy,J,r(T.y01,T.x01),r(T.y11,T.x11),!j),N.arc(0,0,_,r(T.cy+T.y11,T.cx+T.x11),r(O.cy+O.y11,O.cx+O.x11),!j),N.arc(O.cx,O.cy,J,r(O.y11,O.x11),r(O.y01,O.x01),!j))):(N.moveTo(q,G),N.arc(0,0,_,C,I,!j)):N.moveTo(q,G),m>h&&B>h?Y>h?(T=w(K,Q,z,V,m,-Y,j),O=w(q,G,U,$,m,-Y,j),N.lineTo(T.cx+T.x01,T.cy+T.y01),Y<W?N.arc(T.cx,T.cy,Y,r(T.y01,T.x01),r(O.y01,O.x01),!j):(N.arc(T.cx,T.cy,Y,r(T.y01,T.x01),r(T.y11,T.x11),!j),N.arc(0,0,m,r(T.cy+T.y11,T.cx+T.x11),r(O.cy+O.y11,O.cx+O.x11),j),N.arc(O.cx,O.cy,Y,r(O.y11,O.x11),r(O.y01,O.x01),!j))):N.arc(0,0,m,L,M,j):N.lineTo(K,Q)}else N.moveTo(0,0);if(N.closePath(),s)return N=null,s+""||null}return R.centroid=function(){var i=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,s=(+k.apply(this,arguments)+ +A.apply(this,arguments))/2-d/2;return[a(s)*i,u(s)*i]},R.innerRadius=function(t){return arguments.length?(e="function"===typeof t?t:(0,s.A)(+t),R):e},R.outerRadius=function(e){return arguments.length?(t="function"===typeof e?e:(0,s.A)(+e),R):t},R.cornerRadius=function(e){return arguments.length?(i="function"===typeof e?e:(0,s.A)(+e),R):i},R.padRadius=function(e){return arguments.length?(l=null==e?null:"function"===typeof e?e:(0,s.A)(+e),R):l},R.startAngle=function(e){return arguments.length?(k="function"===typeof e?e:(0,s.A)(+e),R):k},R.endAngle=function(e){return arguments.length?(A="function"===typeof e?e:(0,s.A)(+e),R):A},R.padAngle=function(e){return arguments.length?(P="function"===typeof e?e:(0,s.A)(+e),R):P},R.context=function(e){return arguments.length?(N=null==e?null:e,R):N},R}}}]);
//# sourceMappingURL=json_flow.356ac7e4.chunk.js.map